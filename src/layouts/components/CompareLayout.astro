---
import AnimationToggle from "../../components/AnimationToggle.astro";

const { Component, props } = Astro.props;
const { imageLeft, imageRight, caption } = props;

let imageLeftSrc;
let imageRightSrc;

if (imageLeft) {
    imageLeftSrc = /^https?:\/\//i.test(imageLeft) ? imageLeft : new URL(imageLeft.replace(/^\/+/, ''), new URL(import.meta.env.BASE_URL, 'http://local')).pathname;
}

if (imageRight) {
    imageRightSrc = /^https?:\/\//i.test(imageRight) ? imageRight : new URL(imageRight.replace(/^\/+/, ''), new URL(import.meta.env.BASE_URL, 'http://local')).pathname;
}
---
<AnimationToggle>
  <Component imageLeft={imageLeftSrc} imageRight={imageRightSrc} caption={caption} >
    <slot />
  </Component>
</AnimationToggle>
