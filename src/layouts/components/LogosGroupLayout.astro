---
import AnimationToggle from "../../components/AnimationToggle.astro";

const { Component, props } = Astro.props;
const { logos = []} = props;

// Atualiza o array de logos substituindo a imagem original por `thumb` localizada em public/uploads
const updatedLogos = logos.map(logo => {
  let updatedImg = { ...logo.image };
    if (updatedImg) {
        updatedImg = /^https?:\/\//i.test(logo.image) ? logo.image : new URL(logo.image.replace(/^\/+/, ''), new URL(import.meta.env.BASE_URL, 'http://local')).pathname;
    }
  return {
    ...logo,
    image: updatedImg

  };
});
---
<AnimationToggle>
  <Component logos={updatedLogos} />
</AnimationToggle>
