---
import AnimationToggle from "../../components/AnimationToggle.astro";

const { Component, props } = Astro.props;
const { slides = [] } = props;

// Atualiza o array de slides substituindo a imagem original por `thumb` localizada em public/uploads
const updatedSlides = slides.map(slide => {
  let updatedSlide = { ...slide };
    if (updatedSlide.image) {
        updatedSlide.image = /^https?:\/\//i.test(slide.image) ? slide.image : new URL(slide.image.replace(/^\/+/, ''), new URL(import.meta.env.BASE_URL, 'http://local')).pathname;
    }
  return updatedSlide;
});
---
<AnimationToggle>
  <Component slides={updatedSlides} />
</AnimationToggle>
